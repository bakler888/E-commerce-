import{a as B}from"./chunk-MHGHNYLU.js";import{a as N,b as c,c as R,d as A,e as g,f as w,h as G,i as D,j as M,m as q}from"./chunk-BOMYFMUW.js";import"./chunk-KESCHGJR.js";import{c as I,d as T}from"./chunk-OBAEAT6E.js";import{u as F}from"./chunk-I7SXIN4Q.js";import{Ab as h,Bb as f,Ib as s,Jb as l,Qb as V,Ra as t,Wb as m,Xb as d,aa as y,da as b,hb as E,jb as u,na as x,nb as P,oa as C,rb as r,sb as n,tb as v,wb as _}from"./chunk-YJBPNNV7.js";function k(a,p){if(a&1){let o=_();r(0,"section")(1,"h1",0),s(2),m(3,"translate"),n(),r(4,"form",1),h("ngSubmit",function(){x(o);let i=f();return C(i.verifyEmailSubmit())}),r(5,"div")(6,"label",2),s(7),m(8,"translate"),n(),v(9,"input",3),n(),r(10,"button",4),s(11),m(12,"translate"),n()()()}if(a&2){let o=f();t(2),l(d(3,5,"home.Forget Password")),t(2),u("formGroup",o.verifyEmail),t(3),l(d(8,7,"home.email")),t(3),u("disabled",o.verifyEmail.invalid),t(),l(d(12,9,"home.Verify Email"))}}function $(a,p){if(a&1){let o=_();r(0,"section")(1,"form",1),h("ngSubmit",function(){x(o);let i=f();return C(i.verifyCodeSubmit())}),r(2,"div",5)(3,"label",6),s(4),m(5,"translate"),n(),v(6,"input",7),n(),r(7,"button",4),s(8),m(9,"translate"),n()()()}if(a&2){let o=f();t(),u("formGroup",o.verifyCode),t(3),l(d(5,4,"home.Reset Code")),t(3),u("disabled",o.verifyCode.invalid),t(),l(d(9,6,"home.Verify Code"))}}function j(a,p){if(a&1){let o=_();r(0,"section")(1,"h1",0),s(2),m(3,"translate"),n(),r(4,"form",1),h("ngSubmit",function(){x(o);let i=f();return C(i.resetPasswordSubmit())}),r(5,"div")(6,"label",2),s(7),m(8,"translate"),n(),v(9,"input",8),n(),r(10,"div")(11,"label",9),s(12),m(13,"translate"),n(),v(14,"input",10),n(),r(15,"div",5)(16,"button",4),s(17),m(18,"translate"),n()()()()}if(a&2){let o=f();t(2),l(d(3,6,"Reset Password")),t(2),u("formGroup",o.resetPassword),t(3),l(d(8,8,"email")),t(5),l(d(13,10,"newPassword")),t(4),u("disabled",o.resetPassword.invalid),t(),l(d(18,12,"Reset Password"))}}var X=(()=>{let p=class p{constructor(){this.step=1,this._Router=y(F),this._AuthService=y(B),this.verifyEmail=new g({email:new w(null,[c.required,c.email])}),this.verifyCode=new g({resetCode:new w(null,[c.required,c.pattern(/^[0-9]{4,7}$/)])}),this.resetPassword=new g({email:new w(null,[c.required,c.email]),newPassword:new w(null,[c.required,c.pattern(/^\w{6,}$/)])})}verifyEmailSubmit(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:i=>{console.log(i),i.statusMsg==="success"&&(this.step=2)},error:i=>{console.log(i)}})}verifyCodeSubmit(){this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status==="Success"&&(this.step=3)},error:e=>{console.log(e)}})}resetPasswordSubmit(){this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}};p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=b({type:p,selectors:[["app-forgotpassword"]],standalone:!0,features:[V],decls:3,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"btn-main",3,"disabled"],[1,"my-2"],["for","resetCode"],["type","text","id","resetCode","formControlName","resetCode",1,"form-control"],["readonly","","type","email","id","email","formControlName","email",1,"form-control"],["for","newPassword"],["type","newPassword","id","newPassword","formControlName","newPassword",1,"form-control"]],template:function(i,S){i&1&&E(0,k,13,11,"section")(1,$,10,8)(2,j,19,14),i&2&&P(0,S.step===1?0:S.step===2?1:S.step===3?2:-1)},dependencies:[q,G,N,R,A,D,M,T,I]});let a=p;return a})();export{X as ForgotpasswordComponent};
